<!doctype html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://use.typekit.net/jze1rws.css">
<link rel="stylesheet" href="https://use.typekit.net/kbd4gdk.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<title>Riley Swiley - Ana Sayfa</title>
<link href="riley.css" rel="stylesheet" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

@media screen and (max-width: 1920px) {
    #cards-contain {
        flex-direction: column !important;
    }

    .main h1 {
        font-size: 450pt !important;
    }
}

@media screen and (max-width: 1080px) {
    #cards-contain {
        flex-direction: column !important;
    }

    #mid-text {
        font-size: 250pt !important;
    }
}

body {
    background-image: url(resources/images/bg-main.jpeg);
    background-size: cover;
    height: 100vh;
    margin: 0;
    background-repeat: no-repeat;
    background-position: center;
    background-attachment: fixed;
    transition: filter 0.3s ease; /* Blur geçişini yumuşatmak için */
}

.main {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

#mid-text {
    transition: transform 10ms ease-in-out; /* Daha hızlı geçiş */
    color: rgb(255, 0, 187); /* Riley yazısının rengi */
    mix-blend-mode: hard-light;
    font-size: 800pt; 
    pointer-events: none; 
    position: fixed; 
    transform: rotate(-20deg);
}

#play-pause-button {
    position: fixed;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);
    padding: 15px;
    background-color: transparent;
    border: 2px solid rgb(255, 0, 187); /* Riley yazısının rengi */
    color: rgb(255, 0, 187); /* Buton rengi de Riley yazısıyla aynı */
    border-radius: 50%;
    cursor: pointer;
    font-size: 24px;
}

#play-pause-button:hover {
    background-color: rgba(255, 0, 187, 0.1);
}

#play-pause-button i {
    pointer-events: none; /* İkonun tıklanmasını engelle */
}
</style>

</head>

<body>

<audio id="audio-player" crossorigin="anonymous">
    <source src="resources/sound/atilki-bedel-page.mp3" type="audio/mpeg">
    Tarayıcınız bu sesi desteklemiyor.
</audio>
<button id="play-pause-button"><i class="fas fa-play"></i></button>

<div class="main">
    <h1 id="mid-text">
        Riley
    </h1>
</div>

<div style="height: 1920px;">
    <!-- İçerik -->
</div>

<script>
    const audioPlayer = document.getElementById('audio-player');
    const playPauseButton = document.getElementById('play-pause-button');
    const midText = document.getElementById('mid-text'); // Doğru öğeyi seçiyoruz
    const playIcon = '<i class="fas fa-play"></i>';
    const pauseIcon = '<i class="fas fa-pause"></i>';

    // Audio Context ve Analyser oluşturma
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const analyser = audioContext.createAnalyser();
    analyser.fftSize = 64;  // Daha düşük fftSize ile bas frekanslara odaklanıyoruz
    const dataArray = new Uint8Array(analyser.frequencyBinCount);

    // Audio kaynağını bağlama
    const source = audioContext.createMediaElementSource(audioPlayer);
    source.connect(analyser);
    analyser.connect(audioContext.destination);

    // Play/Pause butonu işlevi
    playPauseButton.addEventListener('click', function() {
        if (audioPlayer.paused) {
            audioContext.resume().then(() => {
                audioPlayer.play();
                playPauseButton.innerHTML = pauseIcon;
            });
        } else {
            audioPlayer.pause();
            playPauseButton.innerHTML = playIcon;
        }
    });

    // Müzik sona erdiğinde tekrar çalmaya başla
    audioPlayer.addEventListener('ended', function() {
        audioPlayer.currentTime = 0;
        audioPlayer.play();
        playPauseButton.innerHTML = pauseIcon;
    });

    let previousScale = 1; // Önceki ölçek değerini saklamak için

    function animate() {
        requestAnimationFrame(animate);

        analyser.getByteFrequencyData(dataArray);

        // Bas frekanslara odaklanma - genellikle ilk birkaç değer
        const bassAverage = dataArray.slice(0, 5).reduce((a, b) => a + b) / 15;

        // Yumuşak geçiş için mevcut scale'i önceki scale ile birleştir
        const targetScale = 1 + (bassAverage / 128);  // Frekansın gücünü azaltarak daha hızlı tepki
        const smoothScale = previousScale + (targetScale - previousScale) * 1;  // Daha keskin animasyon

        // Sadece scale uygula, transform değerlerini bozmadan
        midText.style.transform = ` rotate(-20deg) scale(${smoothScale})`;

        // Scale değerini sakla
        previousScale = smoothScale;
    }

    // Animasyonu başlat
    animate();
</script>

</body>
</html>
